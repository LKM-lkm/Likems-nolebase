# 对项目进行的修改

## Markdown 插件

### 高亮插件 (markdown-it-mark)

**安装命令：**

```bash
pnpm add markdown-it-mark
```

**配置位置：** `.vitepress/config.ts`

**配置代码：**

```typescript
import MarkdownItMark from 'markdown-it-mark'

// 在 markdown.config 中添加
config: (md) => {
  md.use(MarkdownItFootnote)
  md.use(MarkdownItMark)  // 高亮插件
},
```

**使用方法：**

- 在 Markdown 中使用 `==高亮文本==` 语法
- 会被渲染为 `<mark>高亮文本</mark>`

### 数学公式渲染器变更

**操作说明：** 移除原有的 markdown-it-mathjax3 插件，为集成 MathJax v4 做准备

**移除的配置：**

```typescript
// 已删除的导入
import MarkdownItMathjax3 from 'markdown-it-mathjax3'

// 已删除的插件使用
config: (md) => {
  md.use(MarkdownItFootnote)
  // md.use(MarkdownItMathjax3)  // 已删除
  md.use(MarkdownItMark)
},
```

**卸载命令：**

```bash
pnpm remove markdown-it-mathjax3
```

**保留的设置：**

- `math: false` - 继续禁用 VitePress 内置的 KaTeX 渲染器
- 为后续集成 MathJax v4 预留配置空间

**变更原因：**

- 准备使用更强大的 MathJax v4 替代 markdown-it-mathjax3
- MathJax v4 提供更好的字体支持（如 Termes 字体）
- 更优秀的渲染质量和印刷级显示效果

## 样式修改

### 主页背景渐变效果

**文件位置：** `.vitepress/styles/main.css`

**CSS 代码：**

```css
/* 主页背景渐变效果 */
.VPHome::before {
  content: "";
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background: linear-gradient(135deg, rgba(173, 216, 230, 0.2), rgba(221, 160, 221, 0.2));
  z-index: -1;
}
```

**效果说明：**

- 为主页添加淡蓝色到淡紫色的渐变背景
- 使用 `::before` 伪元素避免影响页面内容
- 透明度设置为 0.2，保持内容可读性
- 使用 `position: fixed` 确保背景覆盖整个视窗

**颜色说明：**

- `rgba(173, 216, 230, 0.2)` - 淡蓝色 (Light Blue)
- `rgba(221, 160, 221, 0.2)` - 淡紫色 (Plum)
- 渐变方向：135度对角线渐变

## Vue 组件

### 赞赏支持组件 (SponsorSupport)

**创建时间：** 2025年1月13日

**文件位置：** `.vitepress/theme/components/SponsorSupport.vue`

**组件特性：**

- ☕ 顶部导航栏赞赏按钮，简洁美观
- 🎨 遵循 VitePress 主题设计风格
- 📱 完全响应式设计，适配移动端和桌面端
- 🌙 完美支持明暗主题切换
- 🖼️ 支持自定义赞赏二维码图片

**配置文件修改：**

1. **主题注册** (`.vitepress/theme/index.ts`)：

```typescript
import SponsorSupport from './components/SponsorSupport.vue'

// 在 Layout 中添加到顶部导航栏
'nav-bar-content-after': () => [
  h(Share),
  h(SponsorSupport),  // 新增赞赏按钮
  ...slots['nav-bar-content-after'].map(slot => slot()),
],

// 在 enhanceApp 中注册
app.component('SponsorSupport', SponsorSupport)
```

2. **类型定义** (`.vitepress/components.d.ts`)：

```typescript
SponsorSupport: typeof import('./theme/components/SponsorSupport.vue')['default']
```

**功能说明：**

- 顶部导航栏显示心形图标按钮 ❤️ "赞赏支持"
- 点击按钮弹出下拉式赞赏弹窗（固定定位，避免重叠）
- 弹窗标题："感谢您的支持！"
- 显示赞赏二维码图片
- 操作按钮："我已赞赏"（蓝色按钮）
- 点击"我已赞赏"后按钮变为绿色"感谢支持"，3秒后恢复
- 支持点击遮罩层或关闭按钮关闭弹窗
- 使用与分享按钮相同的过渡动画效果

**二维码图片：**

- 图片路径：`/public/donate-qrcode.png`
- 建议尺寸：200x200px
- 支持常见图片格式：PNG、JPG、WEBP

**样式设计：**

- 顶部按钮：与"分享此页"按钮样式和配色完全一致
- 使用相同的 UnoCSS 类：`h-full ws-nowrap px3 text-sm font-medium text="$vp-c-text-1"`
- 悬停效果：`hover:sm:text-$vp-c-brand` 与分享按钮相同
- 赞赏成功状态：`!text-green-400` 绿色显示"感谢支持"，3秒后恢复
- 过渡动画：使用与分享组件相同的 `transition-all duration-250 ease-out`
- 弹窗定位：固定定位，避免与其他元素重叠
- 响应式设计：移动端自适应宽度和位置

## 字体配置

### 主页标题字体组合

**配置时间：** 2025年1月13日

**字体文件：**

- `public/PlayfairDisplay-Bold.woff2` - 英文标题字体
- `public/SarasaGothicSCSimple-Bold.woff2` - 中文标题字体

**配置位置：** `.vitepress/styles/main.css`

**字体定义：**

```css
/* Playfair Display Bold 字体 - 英文标题 */
@font-face {
  font-family: 'PlayfairDisplay-Bold';
  src: url(/PlayfairDisplay-Bold.woff2) format('woff2');
  font-weight: bold;
  font-style: normal;
  font-display: swap;
}

/* Sarasa Gothic SC Simple Bold 字体 - 中文标题 */
@font-face {
  font-family: 'SarasaGothicSC-Bold';
  src: url(/SarasaGothicSCSimple-Bold.woff2) format('woff2');
  font-weight: bold;
  font-style: normal;
  font-display: swap;
}
```

**应用位置：**

```css
/* 首页标题样式 */
.VPHomeHero > .container > .main > h1 {
  font-size: 6rem;
  font-weight: bold;
  font-family: 'PlayfairDisplay-Bold', 'SarasaGothicSC-Bold', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Fira Sans', 'Droid Sans', 'Helvetica Neue', sans-serif;
}
```

**字体特性：**

- **Playfair Display Bold**: 优雅的衬线字体，适合英文标题显示
- **Sarasa Gothic SC Simple Bold**: 现代无衬线字体，专为中文优化
- 使用 `font-display: swap` 优化加载性能
- 完整的字体回退链，确保各种语言正确显示
- 支持现代浏览器的 WOFF2 格式

**字体优先级：**

1. `PlayfairDisplay-Bold` - 英文标题主字体
2. `SarasaGothicSC-Bold` - 中文标题主字体
3. 系统字体栈 - 确保兼容性和可读性

## 赞助商和贡献者组件

### 创建赞助商展示区域

**实现位置：** `.vitepress/theme/components/HomePage.vue`

**组件结构：**

```vue
<template>
  <div>
    <!-- 赞助商区域 -->
    <h2 mt-11 pb-2 text-center>
      Sponsors
    </h2>
    <div flex justify-center>
      <img src="https://cdn.jsdelivr.net/gh/nolebase/sponsors/sponsors.wide.svg">
    </div>

    <!-- 贡献者区域 -->
    <h2 text="center lg" my-5 font-bold>
      💕 感谢所有贡献者！
    </h2>

    <a href="https://github.com/nolebase/nolebase/graphs/contributors">
      <img src="https://contrib.rocks/image?repo=nolebase/nolebase">
    </a>
  </div>
</template>
```

**功能说明：**

- **赞助商图片**：使用 JSDelivr CDN 托管的 SVG 图片
- **贡献者图片**：使用 contrib.rocks 服务自动生成 GitHub 贡献者头像墙
- **响应式设计**：使用 UnoCSS 类实现居中对齐和响应式布局

**自定义配置：**

1. **赞助商图片**：
   - 替换 `https://cdn.jsdelivr.net/gh/nolebase/sponsors/sponsors.wide.svg` 为你的赞助商图片链接
   - 建议使用 SVG 格式以获得最佳显示效果

2. **贡献者链接**：
   - 替换 `nolebase/nolebase` 为你的 GitHub 仓库路径
   - contrib.rocks 会自动生成贡献者头像墙

3. **样式自定义**：
   - `mt-11 pb-2 text-center` - 标题间距和居中
   - `flex justify-center` - 图片居中显示
   - `text="center lg" my-5 font-bold` - 贡献者标题样式

**注意事项：**

- 确保 GitHub 仓库是公开的，contrib.rocks 才能访问贡献者信息
- 赞助商图片建议使用 CDN 托管以提高加载速度
- 可以根据需要调整标题文字和样式类名
